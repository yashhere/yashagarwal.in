---
import { format } from 'date-fns';
import type { CollectionEntry } from 'astro:content';

interface Props {
  note: CollectionEntry<'notes'>;
  homePage?: boolean;
}

const { note, homePage = false } = Astro.props;
const formattedDate = format(note.data.createdOn, 'MM/yy');
---

{homePage ? (
  <div class="flex flex-col py-1">
    <a
      href={`/notes/${note.slug}`}
      class="group hover:bg-accent flex w-full flex-col items-start gap-1 rounded-lg p-3 text-left transition-colors"
    >
      <div class="flex w-full items-baseline justify-between gap-3">
        <span class="text-foreground group-hover:text-primary font-sans text-base font-medium transition-colors">
          {note.data.title}
        </span>
        <span class="text-muted-foreground shrink-0 font-mono text-sm">
          {formattedDate}
        </span>
      </div>
      {note.data.description && (
        <p class="text-muted-foreground line-clamp-2 max-w-[85%] text-sm leading-relaxed">
          {note.data.description}
        </p>
      )}
    </a>
  </div>
) : (
  <div class="flex">
    <a
      href={`/notes/${note.slug}`}
      class="hover:bg-accent flex w-full flex-col items-start gap-0 rounded-lg px-4 py-2 transition-all duration-200 select-none md:flex-row md:items-center md:gap-2"
    >
      <div class="flex flex-col">
        <span class="text-foreground hover:text-primary font-sans text-base transition-colors">
          {note.data.title}
        </span>
      </div>

      <span
        class="border-foreground/30 mx-2 h-px flex-1 border-t border-dotted bg-transparent hidden md:block"
        aria-hidden="true"
      />

      <span class="text-muted-foreground font-mono text-sm self-end md:self-auto">
        {formattedDate}
      </span>
    </a>
  </div>
)}
