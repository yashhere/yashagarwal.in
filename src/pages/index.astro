---
import SocialLinks from "../components/content/SocialLinks.astro"
import Navigation from "../components/layout/Navigation.astro"
import Heading from "../components/ui/Heading.astro"
import { siteConfig } from "../config/site"
import BaseLayout from "../layouts/BaseLayout.astro"
import { getPreviewNotes } from "../lib/content"

const notes = await getPreviewNotes()
const recentNotes = notes.slice(0, siteConfig.featuredNotes)
---

<BaseLayout title="Yash Agarwal | Frontend Engineer">
  <main class="w-full max-w-3xl flex-1 px-4 pb-20 md:px-6">
    <Navigation />
    <div class="mt-16">
      {/* Intro Section */}
      <div class="mb-10">
        <Heading level="h2" as="h1" class="text-foreground font-semibold tracking-wide">
          Yash Agarwal
        </Heading>
        <p class="text-muted-foreground mt-2 text-sm">Engineer / Builder / Learner</p>
      </div>
      <div class="text-foreground/90 space-y-6 text-base leading-relaxed mt-6">
        <p>
          Hey there! <span class="animate-wobble inline-block origin-[70%_70%]">ðŸ‘‹</span>
        </p>
        <p>
          Welcome to my corner of the internet. I write code at{" "}
          <a
            href="https://netskope.com"
            target="_blank"
            class="font-medium underline decoration-muted-foreground/30 underline-offset-4 hover:decoration-foreground transition-all"
          >
            Netskope
          </a>{" "}
          for a living, building CASB security products that protect businesses' data at rest.
        </p>
        <p>
          Currently, I'm optimizing my{" "}
          <span class="font-semibold text-foreground">homelab</span>{" "}
          infrastructure, delving into latest trends in{" "}
          <span class="font-semibold text-foreground">LLMs</span>{" "}
          research, and{" "}
          <span class="font-semibold text-foreground">Backend Systems</span>.
        </p>
      </div>

      {/* Social Links */}
      <div class="mt-8">
        <SocialLinks />
      </div>
    </div>

    {/* Decorative Break - Dot variant */}
    <div class="my-8 flex items-center justify-center">
      <div class="via-border/80 to-border h-px flex-1 bg-linear-to-r from-transparent"></div>
      <div class="px-4">
        <div class="bg-border h-2 w-2 rounded-full shadow-sm"></div>
      </div>
      <div class="via-border/80 to-border h-px flex-1 bg-linear-to-l from-transparent"></div>
    </div>

    {/* Recent Writing Section */}
    <section>
      <Heading level="h3" as="h2" class="text-primary mt-6 mb-2 tracking-wide">
        Recent Writing
      </Heading>

      <div class="flex flex-col justify-start gap-5">
        <ul class="-mx-3">
          {
            recentNotes.map((note) => {
              // Format date as MM/yy
              const date = new Date(note.data.createdOn)
              const dateStr =
                (date.getMonth() + 1).toString().padStart(2, "0") +
                "/" +
                date.getFullYear().toString().slice(-2)

              return (
                <li>
                  <a
                    href={`/notes/${note.slug}`}
                    class="group hover:bg-accent flex w-full flex-col items-start gap-1 rounded-lg p-3 text-left transition-colors"
                  >
                    <div class="flex w-full items-baseline justify-between gap-3">
                      <span class="text-foreground group-hover:text-primary font-sans text-base font-medium transition-colors">
                        {note.data.title}
                      </span>
                      <span class="text-foreground/70 shrink-0 font-mono text-sm">{dateStr}</span>
                    </div>
                    {note.data.description && (
                      <p class="text-muted-foreground line-clamp-2 max-w-[85%] text-sm leading-relaxed">
                        {note.data.description}
                      </p>
                    )}
                  </a>
                </li>
              )
            })
          }
        </ul>
        <a
          href="/notes"
          class="group text-foreground/80 hover:text-primary text-md mt-3 inline-flex items-center gap-1 font-semibold transition-colors"
        >
          <span>View all notes</span>
          <svg
            class="relative top-px h-4 w-4 transition-transform duration-200 ease-out group-hover:translate-x-1"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"
            ></path>
          </svg>
        </a>
      </div>
    </section>
  </main>
</BaseLayout>
